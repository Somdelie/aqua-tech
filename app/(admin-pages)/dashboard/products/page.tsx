import type { Metadata } from "next"
import { Suspense } from "react"
import ProductsListingPage from "@/components/dashboard/products/ProductsListingPage"
import { ProductsTableSkeleton } from "@/components/dashboard/products/ProductsTableSkeleton"

export const metadata: Metadata = {
  title: "Products Management | Aquatech Dashboard",
  description: "Manage your product inventory, pricing, and stock levels.",
}

// This would typically come from your database
const getProductsData = async () => {
  // const products = await prisma.product.findMany({
  //   include: {
  //     category: true,
  //     brand: true,
  //     reviews: true,
  //     orderItems: true,
  //   },
  //   orderBy: { createdAt: 'desc' }
  // })

  return {
    products: [
      {
        id: "1",
        name: "iPhone 13 Pro Max 128GB",
        slug: "iphone-13-pro-max-128gb",
        type: "MOBILE_PHONE",
        condition: "EXCELLENT",
        price: 12500,
        originalPrice: 18999,
        stock: 3,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: true,
        isPreOwned: true,
        discount: 15,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "1", name: "Smartphones" },
        brand: { id: "1", name: "Apple" },
        createdAt: new Date("2024-01-10"),
        updatedAt: new Date("2024-01-15"),
        reviews: [{ rating: 5 }, { rating: 4 }, { rating: 5 }],
        orderItems: [{ quantity: 2 }, { quantity: 1 }],
      },
      {
        id: "2",
        name: "Samsung Galaxy S23 Ultra 256GB",
        slug: "samsung-galaxy-s23-ultra-256gb",
        type: "MOBILE_PHONE",
        condition: "NEW",
        price: 15999,
        originalPrice: null,
        stock: 8,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: false,
        isPreOwned: false,
        discount: 0,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "1", name: "Smartphones" },
        brand: { id: "2", name: "Samsung" },
        createdAt: new Date("2024-01-08"),
        updatedAt: new Date("2024-01-12"),
        reviews: [{ rating: 5 }, { rating: 5 }],
        orderItems: [{ quantity: 1 }],
      },
      {
        id: "3",
        name: "MacBook Air M2 256GB",
        slug: "macbook-air-m2-256gb",
        type: "LAPTOP",
        condition: "EXCELLENT",
        price: 18500,
        originalPrice: 24999,
        stock: 2,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: true,
        isPreOwned: true,
        discount: 10,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "2", name: "Laptops" },
        brand: { id: "1", name: "Apple" },
        createdAt: new Date("2024-01-05"),
        updatedAt: new Date("2024-01-10"),
        reviews: [{ rating: 5 }, { rating: 4 }, { rating: 5 }, { rating: 5 }],
        orderItems: [],
      },
      {
        id: "4",
        name: "Dell XPS 13 i7 16GB",
        slug: "dell-xps-13-i7-16gb",
        type: "LAPTOP",
        condition: "GOOD",
        price: 15200,
        originalPrice: 19999,
        stock: 1,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: false,
        isPreOwned: true,
        discount: 5,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "2", name: "Laptops" },
        brand: { id: "3", name: "Dell" },
        createdAt: new Date("2024-01-03"),
        updatedAt: new Date("2024-01-08"),
        reviews: [{ rating: 4 }, { rating: 4 }],
        orderItems: [{ quantity: 1 }],
      },
      {
        id: "5",
        name: "iPad Air 64GB WiFi",
        slug: "ipad-air-64gb-wifi",
        type: "TABLET",
        condition: "EXCELLENT",
        price: 7800,
        originalPrice: 9999,
        stock: 4,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: false,
        isPreOwned: true,
        discount: 12,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "3", name: "Tablets" },
        brand: { id: "1", name: "Apple" },
        createdAt: new Date("2024-01-01"),
        updatedAt: new Date("2024-01-05"),
        reviews: [{ rating: 5 }],
        orderItems: [{ quantity: 2 }],
      },
      {
        id: "6",
        name: "AirPods Pro 2nd Gen",
        slug: "airpods-pro-2nd-gen",
        type: "ACCESSORY",
        condition: "NEW",
        price: 3200,
        originalPrice: 4999,
        stock: 0,
        lowStockThreshold: 5,
        isAvailable: false,
        isFeatured: true,
        isPreOwned: false,
        discount: 8,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "4", name: "Audio" },
        brand: { id: "1", name: "Apple" },
        createdAt: new Date("2023-12-28"),
        updatedAt: new Date("2024-01-02"),
        reviews: [{ rating: 5 }, { rating: 5 }, { rating: 4 }],
        orderItems: [{ quantity: 3 }, { quantity: 1 }],
      },
      {
        id: "7",
        name: 'Samsung 27" 4K Monitor',
        slug: "samsung-27-4k-monitor",
        type: "MONITOR",
        condition: "GOOD",
        price: 4500,
        originalPrice: 6999,
        stock: 6,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: false,
        isPreOwned: true,
        discount: 20,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "5", name: "Monitors" },
        brand: { id: "2", name: "Samsung" },
        createdAt: new Date("2023-12-25"),
        updatedAt: new Date("2023-12-30"),
        reviews: [{ rating: 4 }, { rating: 4 }],
        orderItems: [],
      },
      {
        id: "8",
        name: "Logitech MX Master 3S",
        slug: "logitech-mx-master-3s",
        type: "MOUSE",
        condition: "NEW",
        price: 1299,
        originalPrice: null,
        stock: 12,
        lowStockThreshold: 5,
        isAvailable: true,
        isFeatured: false,
        isPreOwned: false,
        discount: 0,
        thumbnail: "/Dell XPS.jpg",
        category: { id: "6", name: "Accessories" },
        brand: { id: "4", name: "Logitech" },
        createdAt: new Date("2023-12-20"),
        updatedAt: new Date("2023-12-25"),
        reviews: [{ rating: 5 }, { rating: 5 }],
        orderItems: [{ quantity: 1 }],
      },
    ],
    categories: [
      { id: "1", name: "Smartphones" },
      { id: "2", name: "Laptops" },
      { id: "3", name: "Tablets" },
      { id: "4", name: "Audio" },
      { id: "5", name: "Monitors" },
      { id: "6", name: "Accessories" },
    ],
    brands: [
      { id: "1", name: "Apple" },
      { id: "2", name: "Samsung" },
      { id: "3", name: "Dell" },
      { id: "4", name: "Logitech" },
    ],
  }
}

export default async function ProductsPage() {
  const data = await getProductsData()

  return (
    <Suspense fallback={<ProductsTableSkeleton />}>
      <ProductsListingPage data={data} />
    </Suspense>
  )
}
